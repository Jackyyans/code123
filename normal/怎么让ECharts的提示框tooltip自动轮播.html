<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset='utf-8'>
  <link rel="shortcut icon" href="./image/logo.jpg">
  <meta http-equiv='X-UA-Compatible' content='IE=edge'>
  <title>怎么让ECharts的提示框tooltip自动轮播?</title>
  <meta name='viewport' content='width=device-width, initial-scale=1'>
</head>

<body>
  <!-- 为ECharts准备一个具备大小（宽高）的Dom -->
  <div id="myCharts" style="width: 600px;height:400px;"></div>

  <script src="https://cdn.bootcdn.net/ajax/libs/echarts/4.8.0/echarts-en.min.js"></script>
  <script type="text/javascript">
    // X轴数据
    var xAxisData = ['1月', '2月', '3月', '4月', '5月', '6月', '7月', '8月', '9月', '10月', '11月', '12月'];
    // 需要渲染的series数据
    var seriesData = [2.0, 4.9, 7.0, 23.2, 25.6, 76.7, 135.6, 162.2, 32.6, 20.0, 6.4, 3.3];
    // 基于准备好的dom，初始化echarts实例
    var myChart = echarts.init(document.getElementById('myCharts'));
    // 指定图表的配置项和数据
    var option = {
      tooltip: {
        trigger: 'axis',
        axisPointer: {
          type: 'cross',
          crossStyle: {
            color: '#999'
          }
        }
      },
      legend: {
        data: ['蒸发量', '降水量', '平均温度']
      },
      xAxis: [
        {
          type: 'category',
          data: xAxisData,
          axisPointer: {
            type: 'shadow'
          }
        }
      ],
      yAxis: [
        {
          type: 'value',
          name: '水量',
          min: 0,
          max: 250,
          interval: 50,
          axisLabel: {
            formatter: '{value} ml'
          }
        },
      ],
      series: [
        {
          name: '蒸发量',
          type: 'bar',
          itemStyle: {
            color: new echarts.graphic.LinearGradient(
              0, 0, 0, 1,
              [
                { offset: 0, color: '#83bff6' },
                { offset: 0.5, color: '#188df0' },
                { offset: 1, color: '#188df0' }
              ]
            )
          },
          data: seriesData
        },
      ]
    };

    // 使用刚指定的配置项和数据显示图表
    myChart.setOption(option);
    // 有多少条数据
    var xAxisDatalen = xAxisData.length;
    tooltipTimer = autoHover(
      myChart, // echarts实例
      option, // 图表的配置项和数据
      xAxisDatalen, // 类目数量(循环时达到最大值后，使其从头开始循环)
      3000 // 轮播间隔时长
    );

    /**
 *  echarts tooltip 自动轮播
 *  @author liuwei
 *  @github https://github.com/LivWei/echarts
 *  @param myChart  //初始化echarts的实例
 *  @param option   //指定图表的配置项和数据
 *  @param num      //类目数量(原因：循环时达到最大值后，使其从头开始循环)
 *  @param time     //轮播间隔时长
 */
    function autoHover(myChart, option, num, time) {
      var defaultData = {   //设置默认值
        time: 2000,
        num: 100
      };
      if (!time) {
        time = defaultData.time;
      }
      if (!num) {
        num = defaultData.num;
      }


      var count = 0;
      var timeTicket = null;
      timeTicket && clearInterval(timeTicket);
      timeTicket = setInterval(function () {
        myChart.dispatchAction({
          type: "downplay",
          seriesIndex: 0 //serieIndex的索引值   可以触发多个
        });
        myChart.dispatchAction({
          type: "highlight",
          seriesIndex: 0,
          dataIndex: count
        });
        myChart.dispatchAction({
          type: "showTip",
          seriesIndex: 0,
          dataIndex: count
        });
        count++;
        if (count >= num) {
          count = 0
        }
      }, time);
      myChart.on("mouseover", function (params) {
        clearInterval(timeTicket);
        myChart.dispatchAction({
          type: "downplay",
          seriesIndex: 0
        });
        myChart.dispatchAction({
          type: "highlight",
          seriesIndex: 0,
          dataIndex: params.dataIndex
        });
        myChart.dispatchAction({
          type: "showTip",
          seriesIndex: 0,
          dataIndex: params.dataIndex
        });
      });

      myChart.on("mouseout", function () {
        timeTicket && clearInterval(timeTicket);
        timeTicket = setInterval(function () {
          myChart.dispatchAction({
            type: "downplay",
            seriesIndex: 0 //serieIndex的索引值   可以触发多个
          });
          myChart.dispatchAction({
            type: "highlight",
            seriesIndex: 0,
            dataIndex: count
          });
          myChart.dispatchAction({
            type: "showTip",
            seriesIndex: 0,
            dataIndex: count
          });
          count++;
          if (count >= 17) {
            count = 0
          }
        }, 3000);
      });
      // 原作者没有加返回值,我加了个,返回setInterval() ID 值,用来清除定时器
      return timeTicket;
    }
  </script>
</body>

</html>